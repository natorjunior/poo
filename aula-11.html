<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <title>Aula 11: POO - PersistÃªncia de Dados</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Reveal.js CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/theme/black.css" id="theme">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/highlight/monokai.css">
  <style>
    .reveal pre code { font-size: 0.85em; line-height: 1.3; max-height: 500px; }
    .reveal section img { border-radius: 8px; }
    .reveal h3 { color: #42b983; margin-bottom: 30px; }
    .reveal h4 { color: #64b5f6; margin-top: 20px; }
    .badge { display:inline-block; padding:.3em .8em; border-radius: 5px; background:#e74c3c; color:#fff; font-size:.8em; font-weight: bold; }
    .four-blocks { display: grid; grid-template-columns: 1fr 1fr; grid-gap: 30px; margin: 40px 0; }
    .block { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px; border-radius: 15px; text-align: center; font-size: 1.2em; font-weight: bold; box-shadow: 0 8px 20px rgba(0,0,0,0.3); }
    .highlight { color: #ffd700; font-weight: bold; }
    .connection-box { background: #2c3e50; padding: 15px; border-radius: 8px; margin: 20px 0; font-family: monospace; font-size: 0.8em; }
    .important { border-left: 4px solid #e74c3c; padding-left: 15px; margin: 20px 0; }
    .footer { position: fixed; bottom: 10px; left: 10px; font-size: 0.5em; color: #7f8c8d; }
  </style>
</head>
<body>
  <div class="reveal">
    <div class="slides">

      <!-- CAPA -->
      <section data-background-gradient="linear-gradient(135deg, #667eea 0%, #764ba2 100%)">
        <h1 style="font-size: 2.5em;">POO: Aula 11</h1>
        <h2>PersistÃªncia de Dados</h2>
        <p style="margin-top: 50px;"><span class="badge">Java + JDBC + SQL</span></p>
        <div >
          <p><strong>Me. Nator Junior</strong> | Faculdade Senac CearÃ¡</p>
        </div>
      </section>

      <!-- AGENDA -->
      <section>
        <h3>ğŸ“‹ Agenda</h3>
        <ol style="font-size: 1.3em; line-height: 2;">
          <li>ğŸ”Œ JDBC: Conectando ao Banco</li>
          <li>ğŸ—„ï¸ SQL: Comandos DDL</li>
          <li>âœï¸ SQL: OperaÃ§Ãµes DML/CRUD</li>
          <li>ğŸ¯ Atividades PrÃ¡ticas</li>
        </ol>
      </section>

      <!-- PARTE 1: JDBC -->
      <section>
        <!-- Slide de abertura Parte 1 -->
        <section data-background="#1a1a2e">
          <h1 style="font-size: 2.5em;">ğŸ”Œ Parte 1</h1>
          <h2>JDBC</h2>
          <p style="font-size: 1.2em; margin-top: 30px;">Conectando Java ao Banco de Dados</p>
        </section>

        <!-- SubsessÃ£o 1.1: IntroduÃ§Ã£o -->
        <section>
          <h3>1.1 O que Ã© JDBC?</h3>
          <p style="font-size: 1.4em; margin: 40px 0;"><strong>J</strong>ava <strong>D</strong>ata<strong>B</strong>ase <strong>C</strong>onnectivity</p>
          <ul style="font-size: 1.1em; line-height: 1.8;">
            <li>ğŸ”— API Java para conectar com bancos de dados</li>
            <li>ğŸ—„ï¸ MySQL, PostgreSQL, Oracle, SQLite...</li>
            <li>ğŸŒ Multiplataforma e independente de banco</li>
          </ul>
          <div style="margin-top: 50px; padding: 25px; background: #2c3e50; border-radius: 10px; font-size: 1.2em;">
            <p>ğŸ’¡ <strong>Fluxo:</strong> Java â†”ï¸ JDBC â†”ï¸ Banco de Dados</p>
          </div>
        </section>

        <!-- SubsessÃ£o 1.2: Conectar -->
        <section>
          <h3>1.2 Estabelecendo ConexÃ£o</h3>
          <pre><code class="language-java" data-trim>
import java.sql.*;

public class ConexaoDB {
    public static void main(String[] args) {
        String url = "jdbc:mysql://localhost:3306/meuBanco";
        String usuario = "root";
        String senha = "123456";
        
        try (Connection conn = DriverManager.getConnection(url, usuario, senha)) {
            System.out.println("âœ… Conectado com sucesso!");
        } catch (SQLException e) {
            System.out.println("âŒ Erro: " + e.getMessage());
        }
    }
}
          </code></pre>
          <div class="connection-box">
            <strong>URL Pattern:</strong> jdbc:mysql://<em>HOST</em>:<em>PORTA</em>/<em>BANCO</em>
          </div>
        </section>

        <!-- SubsessÃ£o 1.3: SELECT -->
        <section>
          <h3>1.3 Consultando Dados (SELECT)</h3>
          <pre><code class="language-java" data-trim>
String sql = "SELECT id, nome, email FROM usuarios";

try (Connection conn = DriverManager.getConnection(url, user, pass);
     Statement stmt = conn.createStatement();
     ResultSet rs = stmt.executeQuery(sql)) {
    
    while (rs.next()) {
        int id = rs.getInt("id");
        String nome = rs.getString("nome");
        String email = rs.getString("email");
        
        System.out.println(id + " | " + nome + " | " + email);
    }
}
          </code></pre>
          <p class="important">ğŸ“¦ <code>ResultSet</code> contÃ©m os dados retornados</p>
        </section>

        <!-- SubsessÃ£o 1.4: INSERT -->
        <section>
          <h3>1.4 Inserindo Dados (INSERT)</h3>
          <pre><code class="language-java" data-trim>
String sql = "INSERT INTO usuarios (nome, email, telefone) VALUES (?, ?, ?)";

try (Connection conn = DriverManager.getConnection(url, user, pass);
     PreparedStatement ps = conn.prepareStatement(sql)) {
    
    ps.setString(1, "Maria Santos");
    ps.setString(2, "maria@email.com");
    ps.setString(3, "85987654321");
    
    int linhas = ps.executeUpdate();
    System.out.println("âœ… " + linhas + " registro inserido!");
}
          </code></pre>
          <p class="important">ğŸ”’ <code>PreparedStatement</code> previne SQL Injection!</p>
        </section>

        <!-- SubsessÃ£o 1.5: UPDATE -->
        <section>
          <h3>1.5 Atualizando Dados (UPDATE)</h3>
          <pre><code class="language-java" data-trim>
String sql = "UPDATE usuarios SET email = ?, telefone = ? WHERE id = ?";

try (Connection conn = DriverManager.getConnection(url, user, pass);
     PreparedStatement ps = conn.prepareStatement(sql)) {
    
    ps.setString(1, "maria.santos@email.com");
    ps.setString(2, "85999887766");
    ps.setInt(3, 5);
    
    int linhas = ps.executeUpdate();
    System.out.println("âœ… " + linhas + " registro(s) atualizado(s)");
}
          </code></pre>
        </section>

        <!-- SubsessÃ£o 1.6: DELETE -->
        <section>
          <h3>1.6 Deletando Dados (DELETE)</h3>
          <pre><code class="language-java" data-trim>
String sql = "DELETE FROM usuarios WHERE id = ?";

try (Connection conn = DriverManager.getConnection(url, user, pass);
     PreparedStatement ps = conn.prepareStatement(sql)) {
    
    ps.setInt(1, 5);
    
    int linhas = ps.executeUpdate();
    System.out.println("ğŸ—‘ï¸ " + linhas + " registro(s) deletado(s)");
}
          </code></pre>
          <p class="important">âš ï¸ Sempre use <code>WHERE</code> para evitar deletar tudo!</p>
        </section>

      </section>

      <!-- PARTE 2: ATIVIDADES PRÃTICAS -->
      <section>
        <!-- Slide de abertura Parte 2 -->
        <section data-background="#16213e">
          <h1 style="font-size: 2.5em;">ğŸ¯ Parte 2</h1>
          <h2>Atividades PrÃ¡ticas</h2>
          <p style="font-size: 1.2em; margin-top: 30px;">Banco de Dados: <span class="highlight">aula_java</span></p>
        </section>

        <!-- SubsessÃ£o 2.1: Ambiente -->
        <section>
          <h3>2.1 Ambiente de Desenvolvimento</h3>
          <div class="four-blocks" style="grid-template-columns: 1fr 1fr; font-size: 0.9em;">
            <div class="block">ğŸ¬ MySQL<br/>localhost:3306</div>
            <div class="block">ğŸ˜ Mysql Workbench<br/></div>
            <div class="block">ğŸ“š Materiais<br/>localhost:8080</div>
            <div class="block">â˜• Java + JDBC<br/>Projeto Maven</div>
          </div>
          <div class="connection-box" style="margin-top: 30px;">
            <strong>Credenciais:</strong><br/>
            UsuÃ¡rio: <span class="highlight">aluno</span> | Senha: <span class="highlight">aluno123</span><br/>
            Database: <span class="highlight">aula_java</span>
          </div>
        </section>

        <!-- SubsessÃ£o 2.3: Dados DisponÃ­veis -->
        <section>
          <h3>2.3 Dados PrÃ©-cadastrados</h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; font-size: 0.85em;">
            <div style="background: #2c3e50; padding: 20px; border-radius: 10px;">
              <h4 style="color: #3498db; margin-top: 0;">ğŸ‘¥ Alunos</h4>
              <p style="font-size: 2em; margin: 15px 0; color: #2ecc71;">8</p>
              <p style="font-size: 0.9em;">registros</p>
            </div>
            <div style="background: #2c3e50; padding: 20px; border-radius: 10px;">
              <h4 style="color: #9b59b6; margin-top: 0;">ğŸ“š Disciplinas</h4>
              <p style="font-size: 2em; margin: 15px 0; color: #2ecc71;">8</p>
              <p style="font-size: 0.9em;">registros</p>
            </div>
            <div style="background: #2c3e50; padding: 20px; border-radius: 10px;">
              <h4 style="color: #e74c3c; margin-top: 0;">âœ… MatrÃ­culas</h4>
              <p style="font-size: 2em; margin: 15px 0; color: #2ecc71;">13</p>
              <p style="font-size: 0.9em;">registros</p>
            </div>
          </div>
          <p style="margin-top: 40px; font-size: 1.1em;">
            ğŸ’¡ Use <strong>Mysql Workbench</strong> para explorar os dados!
          </p>
        </section>

        <!-- SubsessÃ£o 2.4: Atividade 1 -->
        <section>
          <h3>ğŸ¯ Atividade 1: Listar Alunos</h3>
          <div class="important" style="text-align: left;">
            <strong>Objetivo:</strong> Criar um programa que liste todos os alunos cadastrados
          </div>
          <div style="text-align: left; font-size: 0.65em; margin-top: 0px;">
            <h4>ğŸ“ Requisitos:</h4>
            <ul style="line-height: 1.8;">
              <li>âœ… Conectar ao banco <code>aula_java</code></li>
              <li>âœ… Executar SELECT na tabela <code>alunos</code></li>
              <li>âœ… Exibir: ID, Nome, Email e Curso</li>
              <li>âœ… Ordenar por nome alfabeticamente</li>
            </ul>
            <h4 style="margin-top: 25px;">ğŸ¯ Resultado Esperado:</h4>
            <p style="background: #2c3e50; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 0.85em;">
              8 alunos listados em ordem alfabÃ©tica
            </p>
          </div>
        </section>

        <!-- SubsessÃ£o 2.5: Atividade 2 -->
        <section>
          <h3>ğŸ¯ Atividade 2: Buscar Aluno por Email</h3>
          <div class="important" style="text-align: left;">
            <strong>Objetivo:</strong> Implementar busca de aluno especÃ­fico usando PreparedStatement
          </div>
          <div style="text-align: left; font-size: 0.55em; margin-top: 0px;">
            <h4>ğŸ“ Requisitos:</h4>
            <ul style="line-height: 1.8;">
              <li>âœ… Criar mÃ©todo <code>buscarPorEmail(String email)</code></li>
              <li>âœ… Usar <strong>PreparedStatement</strong></li>
              <li>âœ… Retornar dados do aluno ou mensagem "nÃ£o encontrado"</li>
            </ul>
            <h4 style="margin-top: 25px;">ğŸ§ª Teste com:</h4>
            <pre><code class="language-java" data-trim style="font-size: 0.75em;">
buscarPorEmail("joao.silva@email.com");
// Deve retornar: JoÃ£o Silva - CiÃªncia da ComputaÃ§Ã£o
            </code></pre>
          </div>
        </section>

        <!-- SubsessÃ£o 2.6: Atividade 3 -->
        <section>
          <h3>ğŸ¯ Atividade 3: Inserir Novo Aluno</h3>
          <div class="important" style="text-align: left;">
            <strong>Objetivo:</strong> Adicionar um novo aluno ao banco de dados
          </div>
          <div style="text-align: left; font-size: 0.9em; margin-top: 30px;">
            <h4>ğŸ“ Requisitos:</h4>
            <ul style="line-height: 1.8;">
              <li>âœ… Usar <code>PreparedStatement</code> para INSERT</li>
            </ul>
            <h4 style="margin-top: 25px;">ğŸ“Š Dados de Teste:</h4>
            <pre><code class="language-java" data-trim style="font-size: 0.7em;">
Nome: "Mariana Oliveira"
Email: "mariana.oliveira@email.com"
Data Nascimento: 2001-04-20
Curso: "CiÃªncia da ComputaÃ§Ã£o"
Ativo: true
            </code></pre>
          </div>
        </section>

        <!-- SubsessÃ£o 2.7: Atividade 4 -->
        <section>
          <h3>ğŸ¯ Atividade 4: Listar Alunos por Curso</h3>
          <div class="important" style="text-align: left;">
            <strong>Objetivo:</strong> Filtrar alunos de um curso especÃ­fico
          </div>
          <div style="text-align: left; font-size: 0.65em; margin-top: 0px;">
            <h4>ğŸ“ Requisitos:</h4>
            <ul style="line-height: 1.8;">
              <li>âœ… WHERE com filtro de curso</li>
              <li>âœ… Exibir contagem de alunos</li>
            </ul>
            <h4 style="margin-top: 5px;">ğŸ§ª Testes:</h4>
            <div style="background: #2c3e50; padding: 5px; border-radius: 8px; font-size: 0.65em;">
              <p>"CiÃªncia da ComputaÃ§Ã£o" â†’ <span class="highlight">4 alunos</span></p>
              <p>"Sistemas de InformaÃ§Ã£o" â†’ <span class="highlight">3 alunos</span></p>
              <p>"Engenharia de Software" â†’ <span class="highlight">1 aluno</span></p>
            </div>
          </div>
        </section>

        <!-- RESOLUÃ‡Ã•ES -->
        <section data-background="#0f3460">
          <h2 style="font-size: 2.5em;">ğŸ’¡ ResoluÃ§Ãµes</h2>
          <p style="font-size: 1.3em; margin-top: 30px;">SoluÃ§Ãµes das Atividades</p>
        </section>

        <!-- ResoluÃ§Ã£o Atividade 1 -->
        <section>
          <h3>ResoluÃ§Ã£o Atividade 1: Listar Alunos</h3>
          <pre><code class="language-java" data-trim style="font-size: 0.65em;">
import java.sql.*;

public class ListarAlunos {
    public static void main(String[] args) {
        String url = "jdbc:mysql://localhost:3306/aula_java";
        String user = "aluno";
        String pass = "aluno123";
        String sql = "SELECT id, nome, email, curso FROM alunos ORDER BY nome";
        
        try (Connection conn = DriverManager.getConnection(url, user, pass);
             Statement stmt = conn.createStatement();
             ResultSet rs = stmt.executeQuery(sql)) {
            
            System.out.println("=== LISTA DE ALUNOS ===");
            while (rs.next()) {
                int id = rs.getInt("id");
                String nome = rs.getString("nome");
                String email = rs.getString("email");
                String curso = rs.getString("curso");
                
                System.out.printf("%d | %s | %s | %s%n", id, nome, email, curso);
            }
            
        } catch (SQLException e) {
            System.err.println("Erro: " + e.getMessage());
        }
    }
}
          </code></pre>
        </section>

        <!-- ResoluÃ§Ã£o Atividade 2 -->
        <section>
          <h3> ResoluÃ§Ã£o Atividade 2: Buscar por Email</h3>
          <pre><code class="language-java" data-trim style="font-size: 0.6em;">
public static void buscarPorEmail(String email) {
    String url = "jdbc:mysql://localhost:3306/aula_java";
    String user = "aluno";
    String pass = "aluno123";
    String sql = "SELECT id, nome, email, curso FROM alunos WHERE email = ?";
    
    try (Connection conn = DriverManager.getConnection(url, user, pass);
         PreparedStatement ps = conn.prepareStatement(sql)) {
        
        ps.setString(1, email);
        ResultSet rs = ps.executeQuery();
        
        if (rs.next()) {
            System.out.println("Aluno encontrado:");
            System.out.println("ID: " + rs.getInt("id"));
            System.out.println("Nome: " + rs.getString("nome"));
            System.out.println("Email: " + rs.getString("email"));
            System.out.println("Curso: " + rs.getString("curso"));
        } else {
            System.out.println("Aluno nÃ£o encontrado!");
        }
        
    } catch (SQLException e) {
        System.err.println("Erro: " + e.getMessage());
    }
}

// Teste:
buscarPorEmail("joao.silva@email.com");
          </code></pre>
        </section>

        <!-- ResoluÃ§Ã£o Atividade 3 -->
        <section>
          <h3>ResoluÃ§Ã£o Atividade 3: Inserir Aluno</h3>
          <pre><code class="language-java" data-trim style="font-size: 0.55em;">
public static void inserirAluno() {
    String url = "jdbc:mysql://localhost:3306/aula_java";
    String user = "aluno";
    String pass = "aluno123";
    String sql = "INSERT INTO alunos (nome, email, data_nascimento, curso, ativo) " +
                 "VALUES (?, ?, ?, ?, ?)";
    
    try (Connection conn = DriverManager.getConnection(url, user, pass);
         PreparedStatement ps = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
        
        ps.setString(1, "Mariana Oliveira");
        ps.setString(2, "mariana.oliveira@email.com");
        ps.setDate(3, Date.valueOf("2001-04-20"));
        ps.setString(4, "CiÃªncia da ComputaÃ§Ã£o");
        ps.setBoolean(5, true);
        
        int linhas = ps.executeUpdate();
        
        if (linhas > 0) {
            ResultSet rs = ps.getGeneratedKeys();
            if (rs.next()) {
                System.out.println("Aluno inserido com ID: " + rs.getInt(1));
            }
        }
        
    } catch (SQLException e) {
        System.err.println("Erro ao inserir: " + e.getMessage());
        if (e.getMessage().contains("Duplicate entry")) {
            System.err.println("Email jÃ¡ cadastrado!");
        }
    }
}
          </code></pre>
        </section>

        <!-- ResoluÃ§Ã£o Atividade 4 -->
        <section>
          <h3>ResoluÃ§Ã£o Atividade 4: Listar por Curso</h3>
          <pre><code class="language-java" data-trim style="font-size: 0.58em;">
public static void listarPorCurso(String curso) {
    String url = "jdbc:mysql://localhost:3306/aula_java";
    String user = "aluno";
    String pass = "aluno123";
    String sql = "SELECT id, nome, email FROM alunos WHERE curso = ? ORDER BY nome";
    
    try (Connection conn = DriverManager.getConnection(url, user, pass);
         PreparedStatement ps = conn.prepareStatement(sql)) {
        
        ps.setString(1, curso);
        ResultSet rs = ps.executeQuery();
        
        System.out.println("=== ALUNOS DO CURSO: " + curso + " ===");
        int contador = 0;
        
        while (rs.next()) {
            contador++;
            System.out.printf("%d. %s (%s)%n", 
                rs.getInt("id"), 
                rs.getString("nome"), 
                rs.getString("email"));
        }
        
        System.out.println("\n Total: " + contador + " aluno(s)");
        
    } catch (SQLException e) {
        System.err.println("Erro: " + e.getMessage());
    }
}

// Testes:
listarPorCurso("CiÃªncia da ComputaÃ§Ã£o");  // 4 alunos
listarPorCurso("Sistemas de InformaÃ§Ã£o"); // 3 alunos
          </code></pre>
        </section>


        
      </section>

      <!-- ENCERRAMENTO -->
      <section data-background-gradient="linear-gradient(135deg, #667eea 0%, #764ba2 100%)">
        <h1 style="font-size: 3em;">Obrigado! ğŸ“</h1>
        <p style="font-size: 1.5em; margin-top: 50px;">DÃºvidas?</p>
        <div style="margin-top: 60px; font-size: 1.1em;">
          <p>ğŸ“š Materiais: <strong>http://localhost:8080</strong></p>
          <p>ğŸ“ Atividades: <strong>localhost:8080/atividades.html</strong></p>
        </div>
        <div style="margin-top: 60px; font-size: 0.9em;">
          <p><strong>Me. Nator Junior</strong></p>
          <p>natorjuniorcc@gmail.com</p>
        </div>
      </section>

    </div>
  </div>

  <!-- Reveal.js Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/dist/reveal.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/notes/notes.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5/plugin/highlight/highlight.js"></script>
  
  <script>
    Reveal.initialize({
      hash: true,
      slideNumber: true,
      transition: 'slide',
      plugins: [RevealNotes, RevealHighlight]
    });
  </script>
</body>
</html>
